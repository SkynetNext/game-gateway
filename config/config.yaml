# Game Gateway 配置文件

server:
  listen_addr: ":8080"
  health_check_port: 9090
  metrics_port: 9091

redis:
  # Redis 地址：生产环境使用 K8s 集群内 Redis
  # 开发环境可改为 localhost:6379
  addr: "10.1.0.8:6379"
  password: ""
  db: 0
  key_prefix: "game-gateway:"
  pool_size: 10
  min_idle_conns: 5
  dial_timeout: 5s
  read_timeout: 3s
  write_timeout: 3s

backend:
  # K8s Service DNS
  account_service: "account-server.hgame.svc.cluster.local:8080"
  version_service: "version-server.hgame.svc.cluster.local:8080"
  game_service: "game-server.hgame.svc.cluster.local:8080"

routing:
  # 路由规则刷新间隔
  refresh_interval: 10s
  # Realm 映射刷新间隔
  realm_refresh_interval: 5s

connection_pool:
  # 最大连接数
  max_connections: 1000
  # 每个服务的最大连接数
  max_connections_per_service: 100
  # 连接空闲超时
  idle_timeout: 5m
  # 连接建立超时
  dial_timeout: 5s
  # 连接读取超时
  read_timeout: 30s
  # 连接写入超时
  write_timeout: 30s
  # 连接重试次数
  max_retries: 3
  # 重试延迟
  retry_delay: 100ms

# 优雅关闭超时
graceful_shutdown_timeout: 30s
